# 07 - Model Layer (Todo.java)

## Simple Explanation (Like You're 10)

Imagine you have a **form** to fill out about a book:

```
Book Form:
- Title: _______________
- Author: ______________
- Pages: _______________
- Read: ☐ Yes ☐ No
```

**The Todo.java class is like this form** - it defines what information a Todo item has!

---

## What is the Model Layer?

The Model layer contains **data structures** (also called POJOs - Plain Old Java Objects).

**POJO** = A simple Java class with:
- Private fields (data)
- Public getters and setters (to access data)
- Constructors (to create objects)
- No special logic or database code

---

## Our Todo Model

### Location
```
src/main/java/com/todo/model/Todo.java
```

### Purpose
Represents a single Todo item with its properties.

---

## Breaking Down Todo.java

### 1. The Fields (Properties)

```java
private int id;
private String title;
private String description;
private boolean completed;
```

**What are fields?**
- Variables that store data
- `private` means only this class can access them directly

**Field Types:**
- `int id` - Whole number (1, 2, 3...)
- `String title` - Text ("Learn Spring")
- `String description` - Text ("Study IoC and DI")
- `boolean completed` - True or False

**Maps to database table:**
```sql
CREATE TABLE todos (
    id INT,                    -- matches: int id
    title VARCHAR(255),        -- matches: String title
    description TEXT,          -- matches: String description
    completed BOOLEAN          -- matches: boolean completed
);
```

---

### 2. Constructors

#### Default Constructor (No Arguments)
```java
public Todo() {
    // Empty - Spring uses this to create objects
}
```

**Why needed?**
- Spring Framework requires it
- JdbcTemplate uses it when creating objects from database rows

#### Constructor with Fields (Except ID)
```java
public Todo(String title, String description, boolean completed) {
    this.title = title;
    this.description = description;
    this.completed = completed;
}
```

**When to use:**
Creating a new Todo (ID will be auto-generated by database)

**Example:**
```java
Todo todo = new Todo("Learn Spring", "Study IoC", false);
// id is not set - database will generate it
```

#### Constructor with All Fields
```java
public Todo(int id, String title, String description, boolean completed) {
    this.id = id;
    this.title = title;
    this.description = description;
    this.completed = completed;
}
```

**When to use:**
Creating a Todo from database data (ID already exists)

**Example:**
```java
// RowMapper uses this when reading from database
Todo todo = new Todo(1, "Learn Spring", "Study IoC", false);
```

---

### 3. Getters and Setters

#### Getters (Read Data)
```java
public int getId() {
    return id;
}

public String getTitle() {
    return title;
}
```

**What they do:**
- Return the value of a private field
- Allow other classes to read the data

**Example:**
```java
Todo todo = new Todo("Learn Spring", "Study IoC", false);
String title = todo.getTitle();  // Returns "Learn Spring"
```

#### Setters (Write Data)
```java
public void setId(int id) {
    this.id = id;
}

public void setTitle(String title) {
    this.title = title;
}
```

**What they do:**
- Set the value of a private field
- Allow other classes to modify the data

**Example:**
```java
Todo todo = new Todo();
todo.setTitle("Learn Spring");
todo.setDescription("Study IoC");
todo.setCompleted(false);
```

---

### 4. toString() Method

```java
@Override
public String toString() {
    return "Todo{" +
            "id=" + id +
            ", title='" + title + '\'' +
            ", description='" + description + '\'' +
            ", completed=" + completed +
            '}';
}
```

**What it does:**
Converts the Todo object to a readable string

**Example:**
```java
Todo todo = new Todo(1, "Learn Spring", "Study IoC", false);
System.out.println(todo);

// Prints:
// Todo{id=1, title='Learn Spring', description='Study IoC', completed=false}
```

**Why useful?**
- Debugging (see what's in the object)
- Logging
- Printing to console

---

## Why Use Getters and Setters?

### Why Not Public Fields?

**Bad (Public fields):**
```java
public class Todo {
    public String title;  // Anyone can access directly
}

Todo todo = new Todo();
todo.title = "";  // Oops! Empty title allowed!
```

**Good (Private fields + Getters/Setters):**
```java
public class Todo {
    private String title;
    
    public void setTitle(String title) {
        if (title == null || title.isEmpty()) {
            throw new IllegalArgumentException("Title cannot be empty");
        }
        this.title = title;
    }
}
```

**Benefits:**
1. ✅ **Validation** - Can check values before setting
2. ✅ **Encapsulation** - Hide internal implementation
3. ✅ **Flexibility** - Can change how data is stored without breaking code
4. ✅ **Control** - Can make fields read-only (getter but no setter)

---

## How Todo.java is Used

### 1. Creating New Todos
```java
// In Main.java
Todo todo = new Todo("Learn Spring", "Study IoC", false);
todoService.addTodo(todo);
```

### 2. Reading from Database
```java
// In TodoDAOImpl (RowMapper)
public Todo mapRow(ResultSet rs, int rowNum) {
    Todo todo = new Todo();  // Use default constructor
    todo.setId(rs.getInt("id"));
    todo.setTitle(rs.getString("title"));
    todo.setDescription(rs.getString("description"));
    todo.setCompleted(rs.getBoolean("completed"));
    return todo;
}
```

### 3. Updating Todos
```java
// In Main.java
Todo todo = todoService.getTodoById(1);
todo.setTitle("Updated Title");
todo.setCompleted(true);
todoService.updateTodo(todo);
```

### 4. Displaying Todos
```java
// In Main.java
List<Todo> todos = todoService.getAllTodos();
for (Todo todo : todos) {
    System.out.println(todo);  // Uses toString()
}
```

---

## Model Layer Best Practices

### 1. Keep It Simple
**Do:**
- Define fields
- Add getters and setters
- Add constructors
- Add toString(), equals(), hashCode()

**Don't:**
- Add business logic
- Add database code
- Add validation (that's Service layer's job)

### 2. Use Meaningful Names
```java
// Good
private String title;
private boolean completed;

// Bad
private String t;
private boolean c;
```

### 3. Follow JavaBean Convention
- Private fields
- Public getters/setters
- Default constructor
- Serializable (optional)

---

## Adding New Fields

Want to add a due date to todos?

### 1. Add Field
```java
private LocalDate dueDate;
```

### 2. Add Getter/Setter
```java
public LocalDate getDueDate() {
    return dueDate;
}

public void setDueDate(LocalDate dueDate) {
    this.dueDate = dueDate;
}
```

### 3. Update Constructors
```java
public Todo(String title, String description, boolean completed, LocalDate dueDate) {
    this.title = title;
    this.description = description;
    this.completed = completed;
    this.dueDate = dueDate;
}
```

### 4. Update toString()
```java
@Override
public String toString() {
    return "Todo{" +
            "id=" + id +
            ", title='" + title + '\'' +
            ", description='" + description + '\'' +
            ", completed=" + completed +
            ", dueDate=" + dueDate +
            '}';
}
```

### 5. Update Database
```sql
ALTER TABLE todos ADD COLUMN due_date DATE;
```

### 6. Update RowMapper
```java
todo.setDueDate(rs.getDate("due_date").toLocalDate());
```

---

## Key Takeaways

1. ✅ **Model** = Data structure (POJO)
2. ✅ **Fields** = Private variables that store data
3. ✅ **Getters** = Methods to read data
4. ✅ **Setters** = Methods to write data
5. ✅ **Constructors** = Ways to create objects
6. ✅ **toString()** = Convert object to readable string
7. ✅ **Keep it simple** = No business logic or database code!

---

## What's Next?

Now that you understand the Model layer, let's dive into the DAO layer that saves this data to the database!

**Next: [08-DAOLayer.md](08-DAOLayer.md) →**
